{
  "vision-pbp": "**Task**:\n\nYou will receive an **image of a page** from a handwritten document.\n\nYour job is to produce a high-quality transcription of the page, accurately capturing all text.\n\n**Instructions**:\n\n1. **Formatting**:\n\n   - **New Lines**: Denote line breaks with `\\n`.\n   - Maintain the original line breaks as they appear in the image.\n   - Do not try to format your output to reflect the layout of the document, except newlines. We only care about the text.\n   - For margin notes etc., include at approximately the place where the note is added in the text, but maintain readability. Include on their own newline(s) if necessary\n   - Use only standard ASCII characters, e.g. 1/2 not \u00bd\n\n2. **Transcription**:\n\n   - Accurately transcribe all text from the image.\n   - Do not correct misspellings or archaic spellings, incorrect capitalization or non-standard contractions. Maintain the text as it appears, including punctuation.\n\n3. **Output**:\n\n   - Return only the transcribed text.\n   - Do not include extra markers or code fences.",
  "vision": "**Task**:\n\nYou will receive several images from a multi-page handwritten document.\n\nYour job is to produce a high-quality transcription of all pages.\n\n**Instructions**:\n\n1. **Formatting**:\n\n   - **New Lines**: Denote line breaks with `\\n`.\n   - Maintain the original line breaks as they appear in the image.\n   - Do not try to format your output to reflect the layout of the document, except newlines. We only care about the text.\n   - For margin notes etc., include at approximately the place where the note is added in the text, but maintain readability. Include on their own newline(s) if necessary\n   - Use only standard ASCII characters, e.g. 1/2 not \u00bd\n\n2. **Transcription**:\n\n   - Accurately transcribe all text from each image.\n   - Do not correct misspellings or archaic spellings, incorrect capitalization or non-standard contractions. Maintain the text as it appears, including punctuation.\n\n3. **Output**:\n\n   - You will return a single JSON object. \n   - Keys must be exactly the fixed page IDs accompanying each image in the input. \n   - Values are plain-text transcriptions. No extra keys or metadata.",
  "ocr-pbp": "**Task**:\n\nYou will receive **OCR text output** for a page of a handwritten document.\n\nYour job is to post-process and correct OCR errors to produce a high-quality transcription.\n\n**Instructions**:\n\n1. **Formatting**:\n\n   - **New Lines**: Denote line breaks with `\\n`.\n   - Maintain the original line breaks as they appear in the OCR output.\n   - Use only standard ASCII characters, e.g. 1/2 not \u00bd\n\n2. **Transcription**:\n\n   - Produce an accurate final transcription for all text from each OCR output.\n   - **Only correct OCR error.** Do not correct misspellings or archaic spellings, incorrect capitalization or non-standard contractions, unless you belive they were caused by poor OCR transcription, rather than originating in the text. Use document content as context to decide what is OCR error and what is from the document.\n\n3. **Output**:\n\n   - Return only the transcribed text.\n   - Do not include extra markers or code fences.",
  "page1": {
    "malvern_hills_multipage": "**Task**:\n\nYou will receive\n- **OCR text output** for several pages of a multi-page handwritten document.\n- An **image of the first page** of the same section of document.\n\nYour job is to post-process and correct OCR errors to produce a high-quality transcription of **all pages**.\n**Use the first page image** to inform corrections across all pages, as they will likely have similar handwriting, formatting and context.\n\nYour input will be structured as:\n```\nPage ID: <PAGE-ID>. Image:\n<IMAGE>\n{\n  <PAGE-ID>: \"<OCR OF PAGE PAGE-ID>\", \n  <OTHER-PAGE-ID>: \"<OCR OF PAGE OTHER-PAGE-ID>\",\n  ...\n}\n```\n\n**Instructions**:\n\n1. **Formatting**:\n\n   - **New Lines**: Denote line breaks with `\\n`.\n   - Maintain the original line breaks as they appear in the OCR output.\n   - Use only standard ASCII characters, e.g. 1/2 not \u00bd\n\n2. **Transcription**:\n\n   - Produce an accurate final transcription for all text from each OCR output.\n   - **Use the image as well as document content as context** to decide what is OCR error and what originates from the document.\n   - The OCR text output you receieve may have been produced by a multi-modal LLM; be prepared to correct hallucinations as well as OCR errors, where appropriate.\n\n3. **Output**:\n\n   - You will return a single JSON object.\n   - Keys must be exactly the fixed page IDs accompanying each OCR transcription in the input. \n   - Values are plain-text corrected transcriptions of the page associated with the given ID. No extra keys or metadata.",
    "default": "**Task**:\n\nYou will receive\n- **OCR text output** for several pages of a multi-page handwritten document.\n- An **image of the first page** of the same section of document.\n\nYour job is to post-process and correct OCR errors to produce a high-quality transcription of **all pages**.\n**Use the first page image** to inform corrections across all pages, as they will likely have similar handwriting, formatting and context.\n\nYour input will be structured as:\n```\nPage ID: <PAGE-ID>. Image:\n<IMAGE>\n{\n  <PAGE-ID>: \"<OCR OF PAGE PAGE-ID>\", \n  <OTHER-PAGE-ID>: \"<OCR OF PAGE OTHER-PAGE-ID>\",\n  ...\n}\n```\n\n**Instructions**:\n\n1. **Formatting**:\n\n   - **New Lines**: Denote line breaks with `\\n`.\n   - Maintain the original line breaks as they appear in the OCR output.\n   - Use only standard ASCII characters, e.g. 1/2 not \u00bd\n\n2. **Transcription**:\n\n   - Produce an accurate final transcription for all text from each OCR output.\n   - **Only correct OCR error.** Do not correct misspellings or archaic spellings, incorrect capitalization or non-standard contractions, unless you belive they were caused by poor OCR transcription, rather than originating in the text. \n   - **Use document content as context** to decide what is OCR error and what originates from the document.\n\n3. **Output**:\n\n   - You will return a single JSON object.\n   - Keys must be exactly the fixed page IDs accompanying each OCR transcription in the input. \n   - Values are plain-text corrected transcriptions of the page associated with the given ID. No extra keys or metadata."
  },
  "all-pages-pbp": "**Task**:\n\nYou will receive:\n- an **image of a page** from a handwritten document.\n- **OCR text output** for that page\n\nYour job is to correct OCR errors to produce a high-quality transcription of the page, accurately capturing all text.\n\n**Instructions**:\n\n1. **Formatting**:\n\n   - **New Lines**: Denote line breaks with `\\n`.\n   - Maintain the original line breaks as they appear in the image.\n   - Do not try to format your output to reflect the layout of the document, except newlines. We only care about the text.\n   - For margin notes etc., include at approximately the place where the note is added in the text, but maintain readability. Include on their own newline(s) if necessary\n   - Use only standard ASCII characters, e.g. 1/2 not \u00bd\n\n2. **Transcription**:\n\n   - Produce an accurate transcription, using both the OCR transcription and the image to help you.\n   - Do not correct misspellings or archaic spellings, incorrect capitalization or non-standard contractions. Maintain the text as it appears in the image, including punctuation.\n\n3. **Output**:\n\n   - Return only the transcribed text.\n   - Do not include extra markers or code fences.",
  "choose_page_id": "**Task**:\n\nYou will receive **noisy OCR text** from a multiple pages of a multi-page handwritten document.\n\nThe input will be json with format `{page_id: int -> text:str}`.\n\nA downstream task will be given this same OCR text and **a single image** corresponding to one page transcribed. The job of the downstream task is to correct the OCR transcription of all pages.\n\nYour job is to study the OCR text and return:\n- The **page ID** of **the image that will be most useful as input for the downstream task**, in addition to the OCR text.\n- Specific notes and suggestions to aid the downstream agent. Do not give generic advice, such as 'focus on unusual spellings'. Point out specific likely errors. Keep your answer as concise as possible, no need to be conversational or include filler text.\n\nConsider factors such as:\n\n- Which page has the least legible text, i.e. the most obvious mistakes which could be corrected more effectively given access to the image?\n- Which page will provide the most context, e.g. particularly difficult words/errors that appear across multiple pages?\n\nA 'corrected' page is one which preserves the accuracy of the original document, including newlines, misspellings and archaic spellings.\n\n**Output**:\n\nReturn a single json output of the following format:\n```\n{\n  \"page_id\": \"<CHOSEN-PAGE-ID>\",\n  \"reasoning\": \"<CONCISE NOTES FOR THE DOWNSTREAM AGENT>\"\n}\n```\nDo not return anything else.",
  "pageN": "**Task**:\n\nYou will receive\n- **OCR text output** for several pages of a multi-page handwritten document.\n- An **image of a single page** of the same section of document.\n\nYour job is to post-process and correct OCR errors to produce a high-quality transcription of **all pages**.\n**Use the page image** to inform corrections across all pages, as they will likely have similar handwriting, formatting and context.\n\nYour input will be structured as:\n```\nPage ID: <PAGE-ID>. Image:\n<IMAGE>\n{\n  <OTHER-PAGE-ID>: \"<OCR OF PAGE OTHER-PAGE-ID>\",\n  <PAGE-ID>: \"<OCR OF PAGE PAGE-ID>\", \n  ...\n}\n```\nNote that the page image you are given may correspond to any page of OCR text, it may not necessarily be the first.\n\n**Instructions**:\n\n1. **Formatting**:\n\n   - **New Lines**: Denote line breaks with `\\n`.\n   - Maintain the original line breaks as they appear in the OCR output.\n   - Use only standard ASCII characters, e.g. 1/2 not \u00bd\n\n2. **Transcription**:\n\n   - Produce an accurate final transcription for all text from each OCR output.\n   - **Only correct OCR error.** Do not correct misspellings or archaic spellings, incorrect capitalization or non-standard contractions, unless you belive they were caused by poor OCR transcription, rather than originating in the text. \n   - **Use document content as context** to decide what is OCR error and what originates from the document.\n\n3. **Output**:\n\n   - You will return a single JSON object.\n   - Keys must be exactly the fixed page IDs accompanying each OCR transcription in the input. \n   - Values are plain-text corrected transcriptions of the page associated with the given ID. No extra keys or metadata."
}